<?xml version="1.0" encoding="UTF-8" ?>

<Page
    Background="{ThemeResource LayerFillColorDefaultBrush}"
    FontFamily="{StaticResource AppFontFamily}"
    mc:Ignorable="d"
    x:Class="GitMC.Views.ConsolePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:GitMC.Extensions"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Page.Resources />

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Header Section  -->
        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <StackPanel Margin="0,0,0,16" Orientation="Horizontal">
                <FontIcon
                    FontSize="24"
                    Glyph="&#xE756;"
                    Margin="0,0,12,0" />
                <TextBlock
                    FontSize="24"
                    FontWeight="SemiBold"
                    Text="{local:Localize Key=Console_Title}"
                    VerticalAlignment="Center" />
            </StackPanel>
        </StackPanel>

        <!--  Console Container  -->
        <Border
            Background="#0C0C0C"
            BorderBrush="#3C3C3C"
            BorderThickness="1"
            CornerRadius="8"
            Grid.Row="1"
            Padding="0">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Terminal Header  -->
                <Border
                    Background="#2D2D30"
                    CornerRadius="8,8,0,0"
                    Grid.Row="0"
                    Padding="16,12">
                    <Grid x:Name="HeaderGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <FontIcon
                                FontSize="14"
                                Foreground="#00FF00"
                                Glyph="&#xE756;"
                                Margin="0,0,8,0"
                                VerticalAlignment="Center" />
                            <TextBlock
                                FontSize="13"
                                FontWeight="SemiBold"
                                Foreground="White"
                                Text="{local:Localize Key=Console_GitBash}"
                                VerticalAlignment="Center" />
                            <TextBlock
                                FontSize="11"
                                Foreground="#9A9A9A"
                                Margin="8,0,0,0"
                                Text=""
                                VerticalAlignment="Center"
                                x:Name="VersionText" />
                        </StackPanel>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button
                                Background="Transparent"
                                BorderThickness="0"
                                Click="ClearConsoleButton_Click"
                                Padding="8"
                                ToolTipService.ToolTip="Clear Console"
                                x:Name="ClearConsoleButton">
                                <FontIcon
                                    FontSize="12"
                                    Foreground="#CCCCCC"
                                    Glyph="&#xE894;" />
                            </Button>
                            <Button
                                Background="Transparent"
                                BorderThickness="0"
                                Click="CopyOutputButton_Click"
                                Margin="4,0,0,0"
                                Padding="8"
                                ToolTipService.ToolTip="Copy Output"
                                x:Name="CopyOutputButton">
                                <FontIcon
                                    FontSize="12"
                                    Foreground="#CCCCCC"
                                    Glyph="&#xE8C8;" />
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>

                <!--  Terminal Output Area  -->
                <ScrollViewer
                    Background="#0C0C0C"
                    Grid.Row="1"
                    Padding="16"
                    VerticalScrollBarVisibility="Auto"
                    VerticalScrollMode="Auto"
                    ZoomMode="Disabled"
                    x:Name="OutputScrollViewer">
                    <RichTextBlock
                        FontFamily="Consolas"
                        FontSize="12"
                        IsTextSelectionEnabled="True"
                        SelectionFlyout="{x:Null}"
                        x:Name="ConsoleOutput">
                        <Paragraph>
                            <Run Foreground="#00FF00" Text="{local:Localize Key=Console_Welcome}" />
                        </Paragraph>
                        <Paragraph>
                            <Run Foreground="#CCCCCC" Text="{local:Localize Key=Console_Ready}" />
                        </Paragraph>
                        <Paragraph>
                            <Run Foreground="#CCCCCC" Text="━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━" />
                        </Paragraph>
                    </RichTextBlock>
                </ScrollViewer>

                <!--  Command Input Area  -->
                <Border
                    Background="#1E1E1E"
                    BorderBrush="#3C3C3C"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,8,8"
                    Grid.Row="2"
                    Padding="16,12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!--  Command Prompt  -->
                        <FontIcon
                            Foreground="{ThemeResource SystemFillColorSuccessBrush}"
                            Glyph="&#xEC61;"
                            Grid.Column="0"
                            Height="24"
                            VerticalAlignment="Center"
                            Width="24"
                            x:Name="CommandStatusIcon" />

                        <ProgressRing
                            Grid.Column="0"
                            Height="24"
                            IsActive="True"
                            VerticalAlignment="Center"
                            Visibility="Collapsed"
                            Width="24"
                            x:Name="CommandProgressRing" />

                        <TextBlock
                            FontWeight="Bold"
                            Grid.Column="1"
                            VerticalAlignment="Center"
                            Visibility="Collapsed"
                            x:Name="StatusCodeText" />

                        <!--  Command Input  -->
                        <TextBox
                            Background="Transparent"
                            BorderThickness="0"
                            FontFamily="Consolas"
                            FontSize="13"
                            Foreground="White"
                            Grid.Column="2"
                            KeyDown="CommandInput_KeyDown"
                            PlaceholderForeground="#6B6B6B"
                            PlaceholderText="{local:Localize Key=Console_Placeholder}"
                            VerticalContentAlignment="Center"
                            x:Name="CommandInput" />

                        <!--  Execute Button  -->
                        <Button
                            Background="#0078D4"
                            BorderThickness="0"
                            Click="ExecuteButton_Click"
                            CornerRadius="4"
                            Grid.Column="3"
                            Margin="8,0,0,0"
                            Padding="12,6"
                            x:Name="ExecuteButton">
                            <StackPanel Orientation="Horizontal">
                                <FontIcon
                                    FontSize="12"
                                    Foreground="White"
                                    Glyph="&#xE768;"
                                    Margin="0,0,4,0" />
                                <TextBlock
                                    FontSize="12"
                                    Foreground="White"
                                    Text="{local:Localize Key=Console_Execute}" />
                            </StackPanel>
                        </Button>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Page>
